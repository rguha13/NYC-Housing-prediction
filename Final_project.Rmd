---
title: "STAT 692 Final Project: NYC Housing market price modeling by location"
author: "Riana Guha"
date: "Spring 2024"
output:
  html_document: 
    toc: yes
  pdf_document: default
urlcolor: cyan
---

# Introduction

The main aim of this project is to model the NYC housing data to determine the optimal house price. I will also be focusing on the house location and it's importance in the price. The dataset is avaliable on kaggle - https://www.kaggle.com/datasets/nelgiriyewithana/new-york-housing-market/data

Project objectives:
Price Analysis: find the ideal price range for houses using predictive modeling. This will provide insights for investors and real estate agents to make informed decisions before purchasing a house in NYC.

Location Analysis: Analyze the importance of house location (neighborhoods, districts, regions).

Key Features:
-`BROKERTITLE`: Title of the broker
-`TYPE`: Type of the house
-`PRICE`: Price of the house
-`BEDS`: Number of bedrooms
-`BATH`: Number of bathrooms
-`PROPERTYSQFT`: Square footage of the property
-`ADDRESS`: Full address of the house
-`STATE`: State of the house
-`MAIN_ADDRESS`: Main address information
-`ADMINISTRATIVE_AREA_LEVEL_2`: Administrative area level 2 information
-`LOCALITY`: Locality information
-`SUBLOCALITY`: Sublocality information
-`STREET_NAME`: Street name
-`LONG_NAME`: Long name
-`FORMATTED_ADDRESS`: Formatted address
-`LATITUDE`: Latitude coordinate of the house
-`LONGITUDE`: Longitude coordinate of the house


Loading the required packages
```{r}
require(tidyverse)
```


Data exploration and cleaning
```{r}
data <- read.csv("NY-House-Dataset.csv")
str(data) # structure of dataset
dim(data) # the dataset contains 4801 rows and 17 columns
colSums(is.na(data)) # checking for missing values per column - No missing values

head(data) # viewing the first 6 rows

data_filtered = data[,c('TYPE', 'PRICE', 'BEDS', 'BATH', 'STATE', 'PROPERTYSQFT', 'ADMINISTRATIVE_AREA_LEVEL_2', 'LOCALITY', 'SUBLOCALITY', 'STREET_NAME', 'LONG_NAME', 'LATITUDE', 'LONGITUDE')] # filtering data to keep relevant columns
colnames(data_filtered) # verifying column names
dim(data_filtered) # it is now a 4801x13 dataset
head(data_filtered)
```


EDA (Exploratory Data Analysis)
```{r}
summary(data_filtered[, c('PRICE', 'BEDS', 'BATH', 'PROPERTYSQFT', 'LATITUDE', 'LONGITUDE')]) # summary statistics for numeric variables
```

**Insights:**
Price:
The average house price is around 2.357 million. This suggests that the houses are quite expensive. The minimum price is 2494 which is quite low and the high is 2.147 billion which is extremely high. This shows quite a drastic range in house prices.

Bed and Bath:
The average house size is 3.357 beds and 2.374 baths (3 bed 2 bath). The minimum is 1 bed and no bath (could be an underdeveloped property), and the maximum is 50 beds and 50 baths (this could be a shared development/ apartment complex).

Property size (in sqft):
The average property size is 2184 sqft which is quite large. The minimum is 230 sqft and maximum is 65535 sqft which shows a large range of property sizes.

```{r}
plot(data_filtered$PROPERTYSQFT, data_filtered$PRICE, 
     main = "Scatter Plot of Price vs. Property Size",
     xlab = "Property Size (Sqft)",
     ylab = "Price",
     col = "blue")

#We can tell from this graph that the 2.147 billion dollar house is a huge outlier and doesn't follow the overall distribution as the other houses in the dataset.
```

Grouping data by SUBLOCALITY and finding the mean of other features
```{r}
grouped_sublocality <- data_filtered %>%
  group_by(SUBLOCALITY) %>%
  summarise(
    Mean_Price = mean(PRICE),
    Mean_Beds = mean(BEDS),
    Mean_Bath = mean(BATH),
    Mean_PropertySqft = mean(PROPERTYSQFT)
  )%>%
  arrange(desc(Mean_Price))

dim(grouped_sublocality) # 21x5 dataset

grouped_sublocality # data by sub-locality in NYC and arranges in descending price
```

**Insights**
New York County has the highest mean price of houses in the dataset and Rego Park has the lowest mean prices of houses in the dataset.

Modifying the dataset for easier plotting
```{r}
grouped_sublocality <- grouped_sublocality %>%
  mutate(
    avg_price = round(Mean_Price / 10^6, 2),  # Display average price in millions
    avg_beds = round(Mean_Beds, 2),   # Round number of bedrooms to 2 decimal places
    avg_baths = round(Mean_Bath, 2),   # Round number of bathrooms to 2 decimal places
    avg_propertsqft = round(Mean_PropertySqft)  # Round property size to whole number
  )%>%
  select(SUBLOCALITY,avg_price, avg_beds, avg_baths, avg_propertsqft)

grouped_sublocality
```

EDA plots
```{r}
sublocalities_plot_price <- grouped_sublocality %>%
  head(10) %>%
  ggplot(aes(x = reorder(SUBLOCALITY, -avg_price), y = avg_price, fill = SUBLOCALITY)) +
  geom_bar(stat = "identity", color = "black") +
  labs(title = "Top 10 Sublocalities by Average Price",
       x = "Sublocality",
       y = "Average Price (Millions)")+
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

sublocalities_plot_price
```

